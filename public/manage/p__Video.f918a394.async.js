(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[36],{BrEy:function(e,n,t){"use strict";t.d(n,"a",(function(){return s})),t.d(n,"d",(function(){return f})),t.d(n,"e",(function(){return l})),t.d(n,"b",(function(){return d})),t.d(n,"c",(function(){return p}));var r=t("9og8"),a=t("WmNS"),c=t.n(a),u=t("aaBP"),i=t.n(u),o=/^(?=[a-f\d]{24}$)(\d+[a-f]|[a-f]+\d)/i,s=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5242880,t=e.size,a=0,u=new FileReader,o=Math.ceil(t/n),s=new i.a.ArrayBuffer,f=File.prototype.slice;return new Promise((function(i,l){function d(){var r=a*n,c=a+1===o?t:(a+1)*n,i=f.call(e,r,c);u.readAsArrayBuffer(i)}u.onload=function(){var e=Object(r["a"])(c.a.mark((function e(n){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.target){e.next=2;break}return e.abrupt("return",l("\u8bfb\u53d6\u9519\u8bef"));case 2:s.append(n.target.result),a++,a<o?d():i(s.end());case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),u.onerror=l,d()}))},f=function(e){return new Promise((function(n){setTimeout(n,e)}))},l=function(e){return btoa(e)},d=function(e){return o.test(e)},p=function(e,n){return Array.isArray(e)&&e.length>=n&&e.every(d)}},OcFg:function(e,n,t){},dcwh:function(e,n,t){"use strict";t.r(n),t.d(n,"PreView",(function(){return O}));t("J+/v");var r=t("MoRW"),a=(t("+L6B"),t("2/Rp")),c=t("q1tI"),u=t.n(c),i=t("9kvl"),o=t("k1fw"),s=(t("miYZ"),t("tsqr")),f=t("tJVT"),l=t("9og8"),d=t("WmNS"),p=t.n(d),b=t("8OJ3"),v=t("CLrh"),m=t("BrEy"),h=(t("/aIJ"),t("OcFg"),Object(c["forwardRef"])((function(e,n){var t=Object(c["useRef"])(null),r=Object(c["useCallback"])((function(e){e.on("timeupdate",(function(){})),e.on("loadstart",(function(){})),e.on("progress",(function(){})),e.on("loadedmetadata",(function(){})),e.on("canplaythrough",(function(){})),e.on("waiting",(function(){})),e.on("play",(function(){})),e.on("playing",(function(){})),e.on("pause",(function(){})),e.on("ended",(function(){})),e.on("error",(function(){})),e.on("seeking",(function(){})),e.on("seeked",(function(){})),e.on("ratechange",(function(){})),e.on("timeupdate",(function(){})),e.on("volumechange",(function(){})),e.on("stalled",(function(){}))}),[]),a=Object(c["useCallback"])(function(){var e=Object(l["a"])(p.a.mark((function e(n){var t,r,a,c,u,i,o,s,l;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=(null===n||void 0===n?void 0:n.split("/"))||[],c=a[a.length-1],c){e.next=4;break}return e.abrupt("return","video/mp4");case 4:return c=c.includes(".")?c.split(".")[0]:c,u={type:1},Object(m["b"])(c)?u["_id"]=c:u.content=c,e.next=9,Object(v["G"])(u);case 9:return i=e.sent,o=(null===i||void 0===i?void 0:i.list)||[],s=Object(f["a"])(o,1),l=s[0],e.abrupt("return",null===l||void 0===l||null===(t=l.info)||void 0===t||null===(r=t.mime)||void 0===r?void 0:r.toLowerCase());case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[]),i=Object(c["useCallback"])(Object(l["a"])(p.a.mark((function n(){var r,c,u;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.current){n.next=2;break}return n.abrupt("return");case 2:if(r=t.current.src(),!r||e.src){n.next=6;break}return s["default"].info("\u89c6\u9891\u5730\u5740\u9519\u8bef"),n.abrupt("return");case 6:if(e.src){n.next=8;break}return n.abrupt("return");case 8:if(r!==e.src){n.next=10;break}return n.abrupt("return");case 10:return n.next=12,a(e.src);case 12:c=n.sent,t.current.pause(),u={src:e.src,type:c||"video/mp4"},t.current.src(u);case 16:case"end":return n.stop()}}),n)}))),[e.src]),d=Object(c["useCallback"])(Object(l["a"])(p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,i();case 4:t.current.load();case 5:case"end":return e.stop()}}),e)}))),[]),h=Object(c["useCallback"])(Object(l["a"])(p.a.mark((function n(){var a;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=Object(b["a"])("video",Object(o["a"])({autoplay:!0,controls:!0,loop:!1,muted:!1,poster:"https://img-home.csdnimg.cn/images/20201124032511.png",language:"zh-CN"},e)),t.current=a,r(a),d();case 4:case"end":return n.stop()}}),n)}))),[]);return Object(c["useImperativeHandle"])(n,(function(){return Object(o["a"])(Object(o["a"])({},t.current),{},{reload:d})})),Object(c["useEffect"])((function(){return h(),function(){var e,n;null===(e=t.current)||void 0===e||e.pause(),null===(n=t.current)||void 0===n||n.dispose()}}),[]),Object(c["useEffect"])((function(){t.current&&d()}),[i,e.src]),u.a.createElement("div",{style:{width:"100%",height:"100%"}},u.a.createElement("video",{style:{width:"100%",height:"100%"},className:"video-js vjs-big-play-centered",id:"video"}))}))),w=Object(c["memo"])(h);function O(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e){var t=Array.isArray(e)?e:[e],r=n?"/media/video/list":"/media/video";i["c"].push({pathname:r,query:{url:t}})}}var j=function(){var e=Object(c["useMemo"])((function(){var e=i["c"].location.query,n=e,t=n.url;return Array.isArray(t)?t[0]||"":t}),[]),n=Object(c["useCallback"])((function(){i["c"].goBack()}),[]);return e?u.a.createElement(w,{src:"/api/static/video/".concat(e,".mp4")}):u.a.createElement(r["a"],{status:"404",title:"404",subTitle:"\u5bf9\u4e0d\u8d77\uff0c\u672a\u627e\u5230\u5bf9\u5e94\u89c6\u9891\u8d44\u6e90",extra:u.a.createElement(a["a"],{onClick:n,type:"primary"},"\u56de\u5230\u4e0a\u4e00\u9875")})};n["default"]=Object(c["memo"])(j)}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[51],{"1uvV":function(e,a,t){e.exports={rankingList:"rankingList___1k2kK",rankingItemNumber:"rankingItemNumber___HoINQ",active:"active___3GdtT",rankingItemTitle:"rankingItemTitle___lPtlT",salesExtra:"salesExtra___h-QJc",currentDate:"currentDate___3lA3Y",salesCard:"salesCard___1IGLI",salesBar:"salesBar___15ZM-",salesRank:"salesRank___3vuAj"}},MFnR:function(e,a,t){"use strict";t.r(a);t("IzEo");var n=t("bx4M"),r=(t("14J3"),t("BMrR")),s=(t("jCWc"),t("kPKH")),c=t("9og8"),i=t("tJVT"),l=(t("iQDF"),t("+eQT")),u=(t("Znn+"),t("ZTPi")),d=t("WmNS"),o=t.n(d),m=t("q1tI"),k=t.n(m),f=t("wd/R"),b=t.n(f),g=t("vN+2"),E=t.n(g),v=t("9kvl"),_=t("1uvV"),p=t.n(_),y=t("ZhIB"),x=t.n(y),O=void 0,h=function(e){var a=e.title,t=e.data,n=void 0===t?[]:t,r=Object(m["useCallback"])((function(e){e&&v["c"].push("/member/".concat(e))}),[]);return k.a.createElement("div",{className:p.a.salesRank},k.a.createElement("h4",{className:p.a.rankingTitle},a),k.a.createElement("ul",{className:p.a.rankingList},n.map((function(e,a){var t=e.title,n=e.value,s=e.index,c=void 0===s?a+1:s;return k.a.createElement("li",{key:t+c},k.a.createElement("span",{className:"".concat(p.a.rankingItemNumber," ").concat(c<3?p.a.active:"")},c),k.a.createElement("span",{onClick:r.bind(O,e._id),className:p.a.rankingItemTitle,title:t},t),k.a.createElement("span",{className:p.a.rankingItemValue},x()(n).format("0,0")))}))))},N=h,j=t("hGx1"),L=t("k1fw"),w=function(e){var a=e.dashboardAndanalysis.dataList,t=a.data,n=a.rank;return{data:t,rank:n,dataLoading:!!e.loading.effects["dashboardAndanalysis/getDataStatisticsList"],userLoading:!!e.loading.effects["dashboardAndanalysis/getUserStatisticsList"]}},D=function(e){return{getDataStatisticsList:function(a){return e(Object(L["a"])({type:"dashboardAndanalysis/getDataStatisticsList"},a))},getUserStatisticsList:function(a){return e(Object(L["a"])({type:"dashboardAndanalysis/getUserStatisticsList"},a))}}},C=u["a"].TabPane,S=l["a"].RangePicker,I=function(e){var a=e.data,t=void 0===a?[]:a,l=e.dataLoading,d=e.userLoading,f=e.rank,g=void 0===f?[]:f,v=e.getDataStatisticsList,_=void 0===v?E.a:v,y=e.getUserStatisticsList,x=void 0===y?E.a:y,O=Object(m["useState"])("day"),h=Object(i["a"])(O,2),L=h[0],w=h[1],D=Object(m["useState"])([b()(),b()()]),I=Object(i["a"])(D,2),Y=I[0],M=I[1],T=Object(m["useState"])("user"),B=Object(i["a"])(T,2),A=B[0],R=B[1],J=Object(m["useCallback"])(Object(c["a"])(o.a.mark((function e(){var a,t,n,r,s;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("user"!==A){e.next=4;break}a=x,e.next=9;break;case 4:if("upload"!==A){e.next=8;break}a=_,e.next=9;break;case 8:return e.abrupt("return");case 9:return n=Object(i["a"])(Y,2),r=n[0],s=n[1],t=L?{date_type:L}:{start_date:r.format("YYYY-MM-DD"),end_date:s.format("YYYY-MM-DD")},e.next=13,a(t);case 13:case"end":return e.stop()}}),e)}))),[Y,A]);Object(m["useEffect"])((function(){J()}),[J]);var P=Object(m["useCallback"])((function(e){return e===L?p.a.currentDate:""}),[L]),Q=function(e,a,t){w(e),M([a,t])},U=Object(m["useMemo"])((function(){return t.map((function(e){return{x:e.day,y:e.count}}))}),[t]),V=Object(m["useMemo"])((function(){return g.map((function(e){return{title:e.name,value:e.count,_id:e._id}}))}),[g]);return k.a.createElement(n["a"],{bordered:!0,loading:"user"==A?d:l,bodyStyle:{padding:"10px 20px"}},k.a.createElement(u["a"],{tabBarExtraContent:k.a.createElement("div",{className:p.a.salesExtraWrap},k.a.createElement("div",{className:p.a.salesExtra},k.a.createElement("a",{className:P("day"),onClick:function(){return Q("day",b()().startOf("D"),b()().endOf("D"))}},"\u4eca\u65e5"),k.a.createElement("a",{className:P("week"),onClick:function(){return Q("week",b()().startOf("week"),b()().endOf("week"))}},"\u672c\u5468"),k.a.createElement("a",{className:P("month"),onClick:function(){return Q("month",b()().startOf("month"),b()().endOf("month"))}},"\u672c\u6708"),k.a.createElement("a",{className:P("year"),onClick:function(){return Q("year",b()().startOf("year"),b()().endOf("year"))}},"\u5168\u5e74")),k.a.createElement(S,{format:"YYYY-MM-DD",value:Y,onChange:function(e){return Q(void 0,e[0],e[1])},style:{width:256}})),size:"large",tabBarStyle:{marginBottom:24},activeKey:A,onChange:R},k.a.createElement(C,{key:"user",tab:"\u7528\u6237\u6ce8\u518c"},k.a.createElement(r["a"],{gutter:24},k.a.createElement(s["a"],{xl:16,lg:12,md:12,sm:24,xs:24},k.a.createElement("div",{className:p.a.salesBar},k.a.createElement(j["a"],{height:400,title:"\u6ce8\u518c\u7528\u6237\u6570\u91cf",data:U}))),k.a.createElement(s["a"],{xl:8,lg:12,md:12,sm:24,xs:24},k.a.createElement(N,{key:"user-rank",title:"\u7528\u6237\u4eba\u6c14\u6392\u884c\u699c",data:V})))),k.a.createElement(C,{tab:"\u7528\u6237\u4e0a\u4f20",key:"upload"},k.a.createElement(r["a"],{gutter:24},k.a.createElement(s["a"],{xl:16,lg:12,md:12,sm:24,xs:24},k.a.createElement("div",{className:p.a.salesBar},k.a.createElement(j["a"],{height:400,title:"\u7528\u6237\u4e0a\u4f20\u7535\u5f71\u91cf",data:U}))),k.a.createElement(s["a"],{xl:8,lg:12,md:12,sm:24,xs:24},k.a.createElement(N,{key:"user-upload",title:"\u7535\u5f71\u6392\u884c\u699c",data:V}))))))};a["default"]=Object(v["a"])(w,D)(I)}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[35],{3:function(e,n){},BrEy:function(e,n,t){"use strict";t.d(n,"a",(function(){return s})),t.d(n,"d",(function(){return f})),t.d(n,"e",(function(){return l})),t.d(n,"b",(function(){return d})),t.d(n,"c",(function(){return p}));var r=t("9og8"),a=t("WmNS"),c=t.n(a),u=t("aaBP"),i=t.n(u),o=/^(?=[a-f\d]{24}$)(\d+[a-f]|[a-f]+\d)/i,s=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5242880,t=e.size,a=0,u=new FileReader,o=Math.ceil(t/n),s=new i.a.ArrayBuffer,f=File.prototype.slice;return new Promise((function(i,l){function d(){var r=a*n,c=a+1===o?t:(a+1)*n,i=f.call(e,r,c);u.readAsArrayBuffer(i)}u.onload=function(){var e=Object(r["a"])(c.a.mark((function e(n){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.target){e.next=2;break}return e.abrupt("return",l("\u8bfb\u53d6\u9519\u8bef"));case 2:s.append(n.target.result),a++,a<o?d():i(s.end());case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),u.onerror=l,d()}))},f=function(e){return new Promise((function(n){setTimeout(n,e)}))},l=function(e){return btoa(e)},d=function(e){return o.test(e)},p=function(e,n){return Array.isArray(e)&&e.length>=n&&e.every(d)}},OcFg:function(e,n,t){},dcwh:function(e,n,t){"use strict";t.r(n),t.d(n,"PreView",(function(){return O}));t("J+/v");var r=t("MoRW"),a=(t("+L6B"),t("2/Rp")),c=t("q1tI"),u=t.n(c),i=t("9kvl"),o=(t("miYZ"),t("tsqr")),s=t("9og8"),f=t("k1fw"),l=t("tJVT"),d=t("WmNS"),p=t.n(d),b=t("8OJ3"),v=t("CLrh"),m=t("BrEy"),w=(t("/aIJ"),t("OcFg"),Object(c["forwardRef"])((function(e,n){var t=Object(c["useState"])(),r=Object(l["a"])(t,2),a=r[0],i=r[1];Object(c["useImperativeHandle"])(n,(function(){return Object(f["a"])(Object(f["a"])({},a),{},{reload:O})}));var d=Object(c["useCallback"])((function(e){e.on("timeupdate",(function(){e.currentTime(),e.duration()})),e.on("loadstart",(function(e){})),e.on("progress",(function(){})),e.on("loadedmetadata",(function(e){})),e.on("canplaythrough",(function(){})),e.on("waiting",(function(){})),e.on("play",(function(){})),e.on("playing",(function(){})),e.on("pause",(function(){})),e.on("ended",(function(){})),e.on("error",(function(){})),e.on("seeking",(function(){})),e.on("seeked",(function(){})),e.on("ratechange",(function(){})),e.on("timeupdate",(function(){})),e.on("volumechange",(function(){})),e.on("stalled",(function(){}))}),[]),w=Object(c["useCallback"])(Object(s["a"])(p.a.mark((function n(){var t;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t=Object(b["a"])("video",Object(f["a"])({autoplay:!0,controls:!0,loop:!1,muted:!1,poster:"https://img-home.csdnimg.cn/images/20201124032511.png",language:"zh-CN"},e)),i(t),d(t),O();case 4:case"end":return n.stop()}}),n)}))),[]),h=Object(c["useCallback"])(function(){var e=Object(s["a"])(p.a.mark((function e(n){var t,r,a,c,u,i,o,s,f;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=(null===n||void 0===n?void 0:n.split("/"))||[],c=a[a.length-1],c){e.next=4;break}return e.abrupt("return","video/mp4");case 4:return c=c.includes(".")?c.split(".")[0]:c,u={type:1},Object(m["b"])(c)?u._id=c:u.content=c,e.next=9,Object(v["E"])(u);case 9:return i=e.sent,o=(null===i||void 0===i?void 0:i.list)||[],s=Object(l["a"])(o,1),f=s[0],e.abrupt("return",null===f||void 0===f||null===(t=f.info)||void 0===t||null===(r=t.mime)||void 0===r?void 0:r.toLowerCase());case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[]),O=Object(c["useCallback"])(Object(s["a"])(p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,j();case 4:a.load();case 5:case"end":return e.stop()}}),e)}))),[a]),j=Object(c["useCallback"])(Object(s["a"])(p.a.mark((function n(){var t,r,c;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a){n.next=2;break}return n.abrupt("return");case 2:if(t=a.src(),!t||e.src){n.next=5;break}return n.abrupt("return",o["default"].info("\u89c6\u9891\u5730\u5740\u9519\u8bef"));case 5:if(e.src){n.next=7;break}return n.abrupt("return");case 7:if(t!==e.src){n.next=9;break}return n.abrupt("return");case 9:return n.next=11,h(e.src);case 11:r=n.sent,a.pause(),c={src:e.src,type:r||"video/mp4"},a.src(c);case 15:case"end":return n.stop()}}),n)}))),[e.src,a]);return Object(c["useEffect"])((function(){return w(),function(){null===a||void 0===a||a.pause(),a&&a.dispose()}}),[]),Object(c["useEffect"])((function(){a&&O()}),[j,a,e.src]),u.a.createElement("video",{style:{width:"100%",height:"100%"},className:"video-js vjs-big-play-centered",id:"video"})}))),h=Object(c["memo"])(w);function O(e,n){if(e){var t=Array.isArray(e)?e:[e];return i["c"].push({pathname:"/media/video",query:{url:t[0]}})}}var j=function(){var e=Object(c["useMemo"])((function(){var e=i["c"].location.query,n=e,t=n.url;return t}),[]),n=Object(c["useCallback"])((function(){i["c"].goBack()}),[]);return e?u.a.createElement(h,{src:"/api/static/video/".concat(e,".mp4")}):u.a.createElement(r["a"],{status:"404",title:"404",subTitle:"\u5bf9\u4e0d\u8d77\uff0c\u672a\u627e\u5230\u5bf9\u5e94\u89c6\u9891\u8d44\u6e90",extra:u.a.createElement(a["a"],{onClick:n,type:"primary"},"\u56de\u5230\u4e0a\u4e00\u9875")})};n["default"]=Object(c["memo"])(j)}}]);